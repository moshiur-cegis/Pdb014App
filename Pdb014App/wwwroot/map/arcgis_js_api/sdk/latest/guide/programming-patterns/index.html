<!DOCTYPE html><html><head><meta charset="utf-8"><meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="content-language" content="en"><meta name="last-modified" content="Thu Jan 09 2020 11:33:52 GMT-0800 (Pacific Standard Time)"><meta name="product" content="js-api-arcgis"><meta name="version" content="4.x"><meta name="subject" content="DEVELOPER,WEB,WEB APPLICATIONS,MOBILE"><meta name="subject_label" content="DEVELOPER,WEB,WEB APPLICATIONS,MOBILE"><meta name="sub_category" content="JavaScript API"><meta name="sub_category_label" content="ArcGIS API for JavaScript"><meta name="content_type" content="Guide"><meta name="content_type_label" content="Guide"><meta name="search-collection" content="help"><meta name="search-category" content="help-api,help-api-guide"><meta name="description" content="Programming patterns"><meta name="keywords" content="needs keywords, tags"><title>Programming patterns | ArcGIS API for JavaScript 4.14</title><link rel="shortcut icon" href="../../../../favicon.ico"><link rel="stylesheet" href="../../../assets/css/default.css"></head><body><developers-account-notifications></developers-account-notifications><div class="wrapper"><header class="top-nav top-nav-hover-top"><div class="grid-container"><div class="column-24"><span class="top-nav-title font-size-1">Go to <a href="https://developers.arcgis.com/javascript/">Latest version (official documentation)</a></span></div></div></header><developers-active-toggle key="secondaryNav"></developers-active-toggle><div class="secondary-nav" data-target="secondaryNav"><div class="secondary-nav-container"><h3 class="secondary-nav-title tablet-hide"><a href="../../../" class="secondary-nav-title-link"><svg class="svg-icon" viewBox="0 0 48 53"><path d="M24.16 2.12L46 8v33.66l-22.14 9.23L2 45V11.9l22.16-9.78M24 0L0 10.6v35.92L24 53l24-10V6.48L24 0zM9 11v30h30V11zm16.33 23.4c0 2.92-1.72 4.25-4.21 4.25a4.37 4.37 0 0 1-4.23-2.58l2.29-1.39c.45.79.85 1.45 1.82 1.45s1.51-.36 1.51-1.77v-9.59h2.82zM32 38.65a5.4 5.4 0 0 1-5.13-2.88l2.29-1.33a3.07 3.07 0 0 0 2.78 1.71c1.17 0 1.91-.58 1.91-1.39 0-1-.76-1.31-2.05-1.87l-.7-.3c-2-.87-3.39-2-3.39-4.25 0-2.12 1.61-3.73 4.13-3.73a4.18 4.18 0 0 1 4 2.26l-2.2 1.41a1.91 1.91 0 0 0-1.81-1.21 1.23 1.23 0 0 0-1.35 1.21c0 .84.53 1.18 1.73 1.71l.71.3c2.39 1 3.74 2.07 3.74 4.43 0 2.54-1.99 3.93-4.66 3.93z"/></svg> JavaScript API</a> <a href="../../.." class="secondary-nav-title-link">4.14</a> <a href="../../../latest/guide/index.html" class="secondary-nav-title-link">Guide</a></h3><h3 class="secondary-nav-title tablet-show"><svg class="svg-icon" viewBox="0 0 48 53"><path d="M24.16 2.12L46 8v33.66l-22.14 9.23L2 45V11.9l22.16-9.78M24 0L0 10.6v35.92L24 53l24-10V6.48L24 0zM9 11v30h30V11zm16.33 23.4c0 2.92-1.72 4.25-4.21 4.25a4.37 4.37 0 0 1-4.23-2.58l2.29-1.39c.45.79.85 1.45 1.82 1.45s1.51-.36 1.51-1.77v-9.59h2.82zM32 38.65a5.4 5.4 0 0 1-5.13-2.88l2.29-1.33a3.07 3.07 0 0 0 2.78 1.71c1.17 0 1.91-.58 1.91-1.39 0-1-.76-1.31-2.05-1.87l-.7-.3c-2-.87-3.39-2-3.39-4.25 0-2.12 1.61-3.73 4.13-3.73a4.18 4.18 0 0 1 4 2.26l-2.2 1.41a1.91 1.91 0 0 0-1.81-1.21 1.23 1.23 0 0 0-1.35 1.21c0 .84.53 1.18 1.73 1.71l.71.3c2.39 1 3.74 2.07 3.74 4.43 0 2.54-1.99 3.93-4.66 3.93z"/></svg> JavaScript API <span class="secondary-nav-breadcrumb">Guide</span></h3><developers-active-toggle toggle="secondaryNavToggle" target="secondaryNavList"></developers-active-toggle><nav id="secondaryNavList" class="secondary-nav-list"><ul class="secondary-nav-items" data-target="secondaryNav"><li class="secondary-nav-item"><a href="../../../" class="secondary-nav-link">Home</a></li><li class="secondary-nav-item"><a href="../../../latest/guide/" class="is-active secondary-nav-link">Guide</a></li><li class="secondary-nav-item"><a href="../../../latest/sample-code/" class="secondary-nav-link">Sample Code</a></li><li class="secondary-nav-item"><a href="../../../latest/api-reference/" class="secondary-nav-link">API Reference</a></li><li class="secondary-nav-item"><a href="../../../latest/showcase/" class="secondary-nav-link">Showcase</a></li><li class="secondary-nav-item"><a href="../../../support/" class="secondary-nav-link">Support</a></li></ul></nav><button id="secondaryNavToggle" class="secondary-nav-toggle" data-toggle="secondaryNav"><svg class="svg-icon" viewBox="0 0 16 16"><path d="M15.5 5l-7 7-7-7z"/></svg><span class="secondary-nav-toggle-label">Menu</span></button></div><button tabindex="-1" class="secondary-nav-canvas" data-toggle="secondaryNav"></button></div><header class="sub-nav sub-nav-purple"><div class="grid-container"><h1 class="sub-nav-title font-size-6 avenir-light leader-2 trailer-2 text-white">Programming patterns</h1></div></header><div id="skip-to-content"><div class="grid-container leader-1"><div class="column-4 post-1 trailer-2 tablet-hide"><aside class="accordion side-nav column-4 guide"><a href="../../../latest/guide/" class="side-nav-link">Overview</a> <a href="../../../latest/guide/release-notes/" class="side-nav-link">Release notes</a> <a href="../../../latest/guide/get-api/" class="side-nav-link">Get the API</a> <a href="../../../latest/guide/quick-start/" class="side-nav-link">Quick Start</a><div class="js-accordion"><div class="accordion-section"><h4 class="accordion-title">Tutorials</h4><nav class="accordion-content"><a href="../../../latest/guide/create-a-starter-app/" class="side-nav-link">Create a starter app</a></nav><nav class="accordion-content"><a href="../../../latest/guide/select-a-basemap/" class="side-nav-link">Select a basemap</a></nav><nav class="accordion-content"><a href="../../../latest/guide/add-layers-to-a-map/" class="side-nav-link">Add layers to a map</a></nav><nav class="accordion-content"><a href="../../../latest/guide/style-feature-layers/" class="side-nav-link">Style feature layers</a></nav><nav class="accordion-content"><a href="../../../latest/guide/configure-pop-ups/" class="side-nav-link">Configure pop-ups</a></nav><nav class="accordion-content"><a href="../../../latest/guide/query-a-feature-layer/" class="side-nav-link">Query a feature layer</a></nav><nav class="accordion-content"><a href="../../../latest/guide/filter-a-feature-layer/" class="side-nav-link">Filter a feature layer</a></nav><nav class="accordion-content"><a href="../../../latest/guide/add-a-layer-from-an-item/" class="side-nav-link">Add a layer from an item</a></nav><nav class="accordion-content"><a href="../../../latest/guide/display-a-styled-vector-basemap/" class="side-nav-link">Display a styled vector basemap</a></nav><nav class="accordion-content"><a href="../../../latest/guide/display-a-web-map/" class="side-nav-link">Display a web map</a></nav><nav class="accordion-content"><a href="../../../latest/guide/add-layers-to-a-3d-scene/" class="side-nav-link">Add layers to a 3D scene</a></nav><nav class="accordion-content"><a href="../../../latest/guide/display-a-web-scene/" class="side-nav-link">Display a web scene</a></nav><nav class="accordion-content"><a href="../../../latest/guide/get-map-coordinates/" class="side-nav-link">Get map coordinates</a></nav><nav class="accordion-content"><a href="../../../latest/guide/draw-graphics/" class="side-nav-link">Draw graphics</a></nav><nav class="accordion-content"><a href="../../../latest/guide/display-point-line-and-polygon-graphics/" class="side-nav-link">Display point, line, and polygon graphics</a></nav><nav class="accordion-content"><a href="../../../latest/guide/display-and-track-your-location/" class="side-nav-link">Display and track your location</a></nav><nav class="accordion-content"><a href="../../../latest/guide/buffer-and-intersect-geometry/" class="side-nav-link">Buffer and intersect geometry</a></nav><nav class="accordion-content"><a href="../../../latest/guide/search-for-an-address/" class="side-nav-link">Search for an address</a></nav><nav class="accordion-content"><a href="../../../latest/guide/find-places/" class="side-nav-link">Find places</a></nav><nav class="accordion-content"><a href="../../../latest/guide/driving-directions/" class="side-nav-link">Driving directions</a></nav><nav class="accordion-content"><a href="../../../latest/guide/get-a-route-and-directions/" class="side-nav-link">Get a route and directions</a></nav><nav class="accordion-content"><a href="../../../latest/guide/get-drive-time/" class="side-nav-link">Get drive time</a></nav><nav class="accordion-content"><a href="../../../latest/guide/access-services-with-oauth-2/" class="side-nav-link">Access services with OAuth 2.0</a></nav></div></div><div class="js-accordion"><div class="accordion-section is-active"><h4 class="accordion-title">Core Concepts</h4><nav class="accordion-content"><a href="../../../latest/guide/maps-and-views/" class="side-nav-link">Maps and Views</a></nav><nav class="accordion-content"><a href="../../../latest/guide/layers-and-data/" class="side-nav-link">Layers and data</a></nav><nav class="accordion-content"><a href="../../../latest/guide/programming-patterns/" class="side-nav-link is-active">Programming patterns</a></nav></div></div><div class="js-accordion"><div class="accordion-section"><h4 class="accordion-title">Data Visualization</h4><nav class="accordion-content"><a href="../../../latest/guide/visualization-overview/" class="side-nav-link">Visualization Overview</a></nav><nav class="accordion-content"><a href="../../../latest/guide/creating-visualizations-manually/" class="side-nav-link">Creating visualizations manually</a></nav><nav class="accordion-content"><a href="../../../latest/guide/visualization-best-practices/" class="side-nav-link">Visualization best practices</a></nav><nav class="accordion-content"><a href="../../../latest/guide/esri-color-ramps/" class="side-nav-link">Esri Color Ramps</a></nav><nav class="accordion-content"><a href="../../../latest/guide/visualizing-points-3d/" class="side-nav-link">Visualizing points with 3D symbols</a></nav><nav class="accordion-content"><a href="../../../latest/guide/labeling/" class="side-nav-link">Labeling</a></nav><nav class="accordion-content"><a href="../../../latest/guide/working-with-scene-layers/" class="side-nav-link">Working with scene layers</a></nav></div></div><div class="js-accordion"><div class="accordion-section"><h4 class="accordion-title">Building your UI</h4><nav class="accordion-content"><a href="../../../latest/guide/view-ui/" class="side-nav-link">View UI</a></nav><nav class="accordion-content"><a href="../../../latest/guide/custom-widget/" class="side-nav-link">Widget Development</a></nav><nav class="accordion-content"><a href="../../../latest/guide/styling/" class="side-nav-link">Styling</a></nav></div></div><div class="js-accordion"><div class="accordion-section"><h4 class="accordion-title">Working with ArcGIS Online and Enterprise</h4><nav class="accordion-content"><a href="../../../latest/guide/working-with-platform/" class="side-nav-link">Working with the ArcGIS platform</a></nav><nav class="accordion-content"><a href="../../../latest/guide/secure-resources/" class="side-nav-link">Access Secure Resources</a></nav></div></div><div class="js-accordion"><div class="accordion-section"><h4 class="accordion-title">Developer Tooling</h4><nav class="accordion-content"><a href="../../../latest/guide/using-frameworks/" class="side-nav-link">Frameworks</a></nav><nav class="accordion-content"><a href="../../../latest/guide/angular/" class="side-nav-link">Angular</a></nav><nav class="accordion-content"><a href="../../../latest/guide/react/" class="side-nav-link">React</a></nav><nav class="accordion-content"><a href="../../../latest/guide/ember/" class="side-nav-link">Ember</a></nav><nav class="accordion-content"><a href="../../../latest/guide/vue/" class="side-nav-link">Vue</a></nav><nav class="accordion-content"><a href="../../../latest/guide/arcgis-cli/" class="side-nav-link">ArcGIS CLI</a></nav><nav class="accordion-content"><a href="../../../latest/guide/webpack/" class="side-nav-link">Webpack</a></nav><nav class="accordion-content"><a href="../../../latest/guide/esri-loader/" class="side-nav-link">esri-loader</a></nav><nav class="accordion-content"><a href="../../../latest/guide/typescript-setup/" class="side-nav-link">TypeScript Setup</a></nav></div></div><div class="js-accordion"><div class="accordion-section"><h4 class="accordion-title">Migrating from 3.x</h4><nav class="accordion-content"><a href="../../../latest/guide/choose-version/" class="side-nav-link">Choose a version</a></nav><nav class="accordion-content"><a href="../../../latest/guide/migrating/" class="side-nav-link">Migrating from 3.x to 4.14</a></nav><nav class="accordion-content"><a href="../../../latest/guide/functionality-matrix/" class="side-nav-link">3.x to 4.x functionality matrix</a></nav></div></div><div class="js-accordion"><div class="accordion-section"><h4 class="accordion-title">Reference</h4><nav class="accordion-content"><a href="../../../latest/guide/arcade/" class="side-nav-link">Arcade</a></nav><nav class="accordion-content"><a href="../../../latest/guide/cors/" class="side-nav-link">CORS</a></nav><nav class="accordion-content"><a href="../../../latest/guide/proxies/" class="side-nav-link">Proxy pages</a></nav><nav class="accordion-content"><a href="../../../latest/guide/esri-icon-font/" class="side-nav-link">Esri Icon Font</a></nav><nav class="accordion-content"><a href="../../../latest/guide/esri-web-style-symbols-2d/" class="side-nav-link">Esri Web Style Symbols (2D)</a></nav><nav class="accordion-content"><a href="../../../latest/guide/esri-web-style-symbols-3d/" class="side-nav-link">Esri Web Style Symbols (3D)</a></nav><nav class="accordion-content"><a href="../../../latest/guide/localization/" class="side-nav-link">Localization</a></nav><nav class="accordion-content"><a href="../../../latest/guide/licensing/" class="side-nav-link">Licensing &amp; Attribution</a></nav><nav class="accordion-content"><a href="../../../latest/guide/system-requirements/" class="side-nav-link">System requirements</a></nav><nav class="accordion-content"><a href="../../../latest/guide/faq/" class="side-nav-link">FAQ</a></nav><nav class="accordion-content"><a href="../../../latest/guide/migrating-from-google-maps-to-arcgis-javascript-api/" class="side-nav-link">Migrating from Google Maps API</a></nav><nav class="accordion-content"><a href="../../../latest/guide/implementing-accessor/" class="side-nav-link">Implementing Accessor</a></nav></div></div></aside><div class="column-4 js-sticky scroll-show tablet-hide" data-top="46"><a href="#" class="btn btn-fill btn-clear">Back to Top</a></div></div><div class="column-24 trailer-1 tablet-show"><select class="select-full trailer-half js-select-nav"><option value="../../../latest/guide/">Overview</option><option value="../../../latest/guide/release-notes/">Release notes</option><option value="../../../latest/guide/get-api/">Get the API</option><option value="../../../latest/guide/quick-start/">Quick Start</option><optgroup label="Tutorials"><option value="../../../latest/guide/create-a-starter-app/">Create a starter app</option><option value="../../../latest/guide/select-a-basemap/">Select a basemap</option><option value="../../../latest/guide/add-layers-to-a-map/">Add layers to a map</option><option value="../../../latest/guide/style-feature-layers/">Style feature layers</option><option value="../../../latest/guide/configure-pop-ups/">Configure pop-ups</option><option value="../../../latest/guide/query-a-feature-layer/">Query a feature layer</option><option value="../../../latest/guide/filter-a-feature-layer/">Filter a feature layer</option><option value="../../../latest/guide/add-a-layer-from-an-item/">Add a layer from an item</option><option value="../../../latest/guide/display-a-styled-vector-basemap/">Display a styled vector basemap</option><option value="../../../latest/guide/display-a-web-map/">Display a web map</option><option value="../../../latest/guide/add-layers-to-a-3d-scene/">Add layers to a 3D scene</option><option value="../../../latest/guide/display-a-web-scene/">Display a web scene</option><option value="../../../latest/guide/get-map-coordinates/">Get map coordinates</option><option value="../../../latest/guide/draw-graphics/">Draw graphics</option><option value="../../../latest/guide/display-point-line-and-polygon-graphics/">Display point, line, and polygon graphics</option><option value="../../../latest/guide/display-and-track-your-location/">Display and track your location</option><option value="../../../latest/guide/buffer-and-intersect-geometry/">Buffer and intersect geometry</option><option value="../../../latest/guide/search-for-an-address/">Search for an address</option><option value="../../../latest/guide/find-places/">Find places</option><option value="../../../latest/guide/driving-directions/">Driving directions</option><option value="../../../latest/guide/get-a-route-and-directions/">Get a route and directions</option><option value="../../../latest/guide/get-drive-time/">Get drive time</option><option value="../../../latest/guide/access-services-with-oauth-2/">Access services with OAuth 2.0</option></optgroup><optgroup label="Core Concepts"><option value="../../../latest/guide/maps-and-views/">Maps and Views</option><option value="../../../latest/guide/layers-and-data/">Layers and data</option><option value="../../../latest/guide/programming-patterns/" selected="selected">Programming patterns</option></optgroup><optgroup label="Data Visualization"><option value="../../../latest/guide/visualization-overview/">Visualization Overview</option><option value="../../../latest/guide/creating-visualizations-manually/">Creating visualizations manually</option><option value="../../../latest/guide/visualization-best-practices/">Visualization best practices</option><option value="../../../latest/guide/esri-color-ramps/">Esri Color Ramps</option><option value="../../../latest/guide/visualizing-points-3d/">Visualizing points with 3D symbols</option><option value="../../../latest/guide/labeling/">Labeling</option><option value="../../../latest/guide/working-with-scene-layers/">Working with scene layers</option></optgroup><optgroup label="Building your UI"><option value="../../../latest/guide/view-ui/">View UI</option><option value="../../../latest/guide/custom-widget/">Widget Development</option><option value="../../../latest/guide/styling/">Styling</option></optgroup><optgroup label="Working with ArcGIS Online and Enterprise"><option value="../../../latest/guide/working-with-platform/">Working with the ArcGIS platform</option><option value="../../../latest/guide/secure-resources/">Access Secure Resources</option></optgroup><optgroup label="Developer Tooling"><option value="../../../latest/guide/using-frameworks/">Frameworks</option><option value="../../../latest/guide/angular/">Angular</option><option value="../../../latest/guide/react/">React</option><option value="../../../latest/guide/ember/">Ember</option><option value="../../../latest/guide/vue/">Vue</option><option value="../../../latest/guide/arcgis-cli/">ArcGIS CLI</option><option value="../../../latest/guide/webpack/">Webpack</option><option value="../../../latest/guide/esri-loader/">esri-loader</option><option value="../../../latest/guide/typescript-setup/">TypeScript Setup</option></optgroup><optgroup label="Migrating from 3.x"><option value="../../../latest/guide/choose-version/">Choose a version</option><option value="../../../latest/guide/migrating/">Migrating from 3.x to 4.14</option><option value="../../../latest/guide/functionality-matrix/">3.x to 4.x functionality matrix</option></optgroup><optgroup label="Reference"><option value="../../../latest/guide/arcade/">Arcade</option><option value="../../../latest/guide/cors/">CORS</option><option value="../../../latest/guide/proxies/">Proxy pages</option><option value="../../../latest/guide/esri-icon-font/">Esri Icon Font</option><option value="../../../latest/guide/esri-web-style-symbols-2d/">Esri Web Style Symbols (2D)</option><option value="../../../latest/guide/esri-web-style-symbols-3d/">Esri Web Style Symbols (3D)</option><option value="../../../latest/guide/localization/">Localization</option><option value="../../../latest/guide/licensing/">Licensing &amp; Attribution</option><option value="../../../latest/guide/system-requirements/">System requirements</option><option value="../../../latest/guide/faq/">FAQ</option><option value="../../../latest/guide/migrating-from-google-maps-to-arcgis-javascript-api/">Migrating from Google Maps API</option><option value="../../../latest/guide/implementing-accessor/">Implementing Accessor</option></optgroup></select></div><main class="column-15 tablet-column-12 content-face"><div class="js-container-guide"><h2 id="introduction">Introduction</h2><p>This section discusses programming patterns and best practices for writing applications with the ArcGIS API for JavaScript.</p><h2 id="loading-classes">Loading Classes</h2><p>After <a href="../../../latest/guide/get-api/">getting the ArcGIS API for JavaScript</a>, use <code>require()</code> to asynchronously load ArcGIS API for JavaScript classes into an application.</p><p>The method requires two parameters:</p><ul><li>An array of ordered strings as the full namespaces for each imported API class</li><li>Each API class is loaded as the positional arguments in a callback function</li></ul><p>For example, to load the <a href="../../../latest/api-reference/esri-Map.html"><code>Map</code></a> and <a href="../../../latest/api-reference/esri-views-MapView.html"><code>MapView</code></a> class, first go to the documentation and find the full namespace for each class. In this case, <code>Map</code> has the namespace <code>&quot;esri/Map&quot;</code> and the namespace for <code>MapView</code> is <code>&quot;esri/views/MapView&quot;</code>. Then pass these strings as an array to <code>require()</code>, and use the local variable names <code>Map</code> and <code>MapView</code> as the positional arguments for the callback function:</p><pre><code class="js"><span class="hljs-built_in">require</span>([<span class="hljs-string">"esri/Map"</span>, <span class="hljs-string">"esri/views/MapView"</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">Map, MapView</span>)
  // <span class="hljs-title">The</span> <span class="hljs-title">application</span> <span class="hljs-title">logic</span> <span class="hljs-title">using</span> `<span class="hljs-title">Map</span>` <span class="hljs-title">and</span> `<span class="hljs-title">MapView</span>` <span class="hljs-title">goes</span> <span class="hljs-title">here</span>
});
</span></code></pre><p>Not every module needs to be loaded with <code>require()</code>, as many classes can be initialized from within a constructor using <a href="#autocasting">autocasting</a>.</p><blockquote><p>Learn more about the AMD module format with the <a href="https://dojotoolkit.org/documentation/tutorials/1.10/modules/index.html">Dojo Toolkit introduction to AMD modules</a>.</p></blockquote><h2 id="constructors">Constructors</h2><p>All classes in the ArcGIS API for JavaScript have a single constructor, and all properties can be set by passing parameters to the constructor.</p><p>For example, here is an example of calling the constructor for the <code>Map</code> and <code>MapView</code> classes.</p><pre><code class="js"><span class="hljs-keyword">var</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>({
  <span class="hljs-attr">basemap</span>: <span class="hljs-string">"topo-vector"</span>
});

<span class="hljs-keyword">var</span> view = <span class="hljs-keyword">new</span> MapView({
  <span class="hljs-attr">map</span>: map,
  <span class="hljs-attr">container</span>: <span class="hljs-string">"map-div"</span>,
  <span class="hljs-attr">center</span>: [ <span class="hljs-number">-122</span>, <span class="hljs-number">38</span> ],
  <span class="hljs-attr">scale</span>: <span class="hljs-number">5</span>
});
</code></pre><p>Alternatively, the properties of class instances can be specified directly using <a href="#setters">setters</a>.</p><pre><code class="js"><span class="hljs-keyword">var</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>();
<span class="hljs-keyword">var</span> view = <span class="hljs-keyword">new</span> MapView();

map.basemap = <span class="hljs-string">"topo-vector"</span>;           <span class="hljs-comment">// Set a property</span>

<span class="hljs-keyword">var</span> viewProps = {                    <span class="hljs-comment">// Object with property data</span>
  <span class="hljs-attr">container</span>: <span class="hljs-string">"map-div"</span>,
  <span class="hljs-attr">map</span>: map,
  <span class="hljs-attr">scale</span>: <span class="hljs-number">5000</span>,
  <span class="hljs-attr">center</span>: [ <span class="hljs-number">-122</span>, <span class="hljs-number">38</span> ]
};

view.set(viewProps);                   <span class="hljs-comment">// Use a setter</span>
</code></pre><h2 id="properties">Properties</h2><p>The ArcGIS API for JavaScript supports a simple, consistent way of getting, setting, and watching all properties of a class.</p><p>Many API classes are subclasses of the <a href="../../../latest/api-reference/esri-core-Accessor.html"><code>Accessor</code></a> class, which defines the following methods.</p><table class="table"><thead><tr><th style="text-align:left">Method Name</th><th style="text-align:center">Return Type</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:left"><a href="../../../latest/api-reference/esri-core-Accessor.html#get"><code>get(propertyName)</code></a></td><td style="text-align:center">Varies</td><td style="text-align:left">Gets the value of the property with the name <code>propertyName</code></td></tr><tr><td style="text-align:left"><a href="../../../latest/api-reference/esri-core-Accessor.html#set"><code>set(propertyFields)</code></a></td><td style="text-align:center">N/A</td><td style="text-align:left">For each <code>key</code>/<code>value</code> pair in <code>propertyFields</code>, this method sets the value of the property with the name <code>key</code> to <code>value</code></td></tr><tr><td style="text-align:left"><a href="../../../latest/api-reference/esri-core-Accessor.html#watch"><code>watch(propertyName, callback)</code></a></td><td style="text-align:center"><a href="../../../latest/api-reference/esri-core-Accessor.html#WatchHandle"><code>WatchHandle</code></a></td><td style="text-align:left">Calls the callback function <code>callback</code> whenever the value of the property with the name <code>propertyName</code> changes</td></tr></tbody></table><h3 id="getters">Getters</h3><p>The <code>get</code> method returns the value of a named property.</p><p>This method is a convenience method because, without using <code>get()</code>, to return the value nested properties, e.g., to return the <code>title</code> of the property <code>basemap</code> of a <code>Map</code> object, requires an <code>if</code> statement to check whether <code>basemap</code> is either <code>undefined</code> or <code>null</code>.</p><pre><code class="js"><span class="hljs-keyword">var</span> basemapTitle = <span class="hljs-literal">null</span>;
<span class="hljs-keyword">if</span> (map.basemap) {                     <span class="hljs-comment">// Make sure `map.basemap` exists</span>
  basemapTitle = map.basemap.title;
}
</code></pre><p>The <code>get</code> method removes the need for the <code>if</code> statement, and returns the value of <code>map.basemap.title</code> if <code>map.basemap</code> exists, and <code>null</code> otherwise.</p><pre><code class="js"><span class="hljs-keyword">var</span> basemapTitle = map.get(<span class="hljs-string">"basemap.title"</span>);
</code></pre><h2 id="setters">Setters</h2><p>The values of properties may be set directly.</p><pre><code class="js">view.center = [ <span class="hljs-number">-100</span>, <span class="hljs-number">40</span> ];
view.zoom = <span class="hljs-number">6</span>;
map.basemap = <span class="hljs-string">"oceans"</span>;
</code></pre><p>When several property values need to be changed, <code>set()</code> can be passed a JavaScript <code>Object</code> with the property names and the new values.</p><pre><code class="js"><span class="hljs-keyword">var</span> newViewProperties = {
  <span class="hljs-attr">center</span>: [ <span class="hljs-number">-100</span>, <span class="hljs-number">40</span> ],
  <span class="hljs-attr">zoom</span>: <span class="hljs-number">6</span>
};

view.set(newViewProperties);
</code></pre><blockquote><p>Prior to 4.x, some properties could be get or set by calling <em><strong>get</strong>Methodname()</em> or <em><strong>set</strong>Methodname()</em>. These getter and setter methods are no longer supported.</p></blockquote><h3 id="watching-for-property-changes">Watching for Property Changes</h3><p>Watching property changes are handled with <code>watch()</code>, which takes two parameters:</p><ul><li>A property name as a <code>String</code>, and</li><li>A callback function that is called whenever the property value changes</li></ul><p>A <a href="../../../latest/api-reference/esri-core-Accessor.html#WatchHandle"><code>WatchHandle</code></a> instance is returned by <code>watch()</code>.</p><p>The following code sample watches the <code>basemap.title</code> property of a <code>Map</code> object, and calls the <code>titleChangeCallback</code> function whenever the basemap title value changes.</p><pre><code class="js"><span class="hljs-keyword">var</span> map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Map</span>({
  <span class="hljs-attr">basemap</span>: <span class="hljs-string">"streets-vector"</span>
});

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">titleChangeCallback</span> (<span class="hljs-params">newValue, oldValue, property, object</span>) </span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"New value: "</span>, newValue,
              <span class="hljs-string">"&lt;br&gt;Old value: "</span>, oldValue,
              <span class="hljs-string">"&lt;br&gt;Watched property: "</span>, property,
              <span class="hljs-string">"&lt;br&gt;Watched object: "</span>, object);
};

<span class="hljs-keyword">var</span> handle = map.watch(<span class="hljs-string">'basemap.title'</span>, TitleChangeCallBack);
</code></pre><p>For example, if the <code>basemap</code> property changes:</p><pre><code class="js">map.basemap = <span class="hljs-string">"topo-vector"</span>;
</code></pre><p>Then the <code>titleChangeCallback</code> function is called and the following is printed to console:</p><pre><code class="js">New value: Topographic
Old value: Streets
Watched property: basemap.title
Watched object: ...                    <span class="hljs-comment">// This will log the map object</span>
</code></pre><p>The <code>remove</code> method can be called on a <code>WatchHandle</code> object to stop watching for changes.</p><pre><code class="js">handle.remove();
</code></pre><p>Not all properties can be watched, including <a href="../../../latest/api-reference/esri-core-Collection.html">collections</a>. Register an event handler to be notified of <a href="../../../latest/api-reference/esri-core-Collection.html#event-change">changes</a> to a collection.</p><blockquote><p><strong>Note:</strong> Because both the <code>FeatureLayer.source</code> and <code>GraphicsLayer.graphics</code> properties are collections, use <code>on()</code> instead of <code>watch()</code> to be notified of changes to the values of these properties.</p></blockquote><h2 id="autocasting">Autocasting</h2><p>Autocasting is used to cast JavaScript objects as ArcGIS API for JavaScript class types without the need for these classes to be loaded with <code>require()</code>.</p><p>In the following code sample, five API classes are needed to create a <a href="../../../latest/api-reference/esri-renderers-SimpleRenderer.html">SimpleRenderer</a> for a <a href="../../../latest/api-reference/esri-layers-FeatureLayer.html">FeatureLayer</a>.</p><pre><code class="js"><span class="hljs-built_in">require</span>([
  <span class="hljs-string">"esri/Color"</span>,
  <span class="hljs-string">"esri/symbols/SimpleLineSymbol"</span>,
  <span class="hljs-string">"esri/symbols/SimpleMarkerSymbol"</span>,
  <span class="hljs-string">"esri/renderers/SimpleRenderer"</span>,
  <span class="hljs-string">"esri/layers/FeatureLayer"</span>,
], <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">
  Color, SimpleLineSymbol, SimpleMarkerSymbol, SimpleRenderer, FeatureLayer
</span>) </span>{

  <span class="hljs-keyword">var</span> layerURL = <span class="hljs-string">"https://services.arcgis.com/V6ZHFr6zdgNZuVG0/arcgis/rest/services/WorldCities/FeatureServer/0"</span>;

  <span class="hljs-keyword">var</span> orangeColor = <span class="hljs-keyword">new</span> Color([<span class="hljs-number">255</span>, <span class="hljs-number">128</span>, <span class="hljs-number">45</span>]);
  <span class="hljs-keyword">var</span> blackColor = <span class="hljs-keyword">new</span> Color([<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>]);

  <span class="hljs-keyword">var</span> symbol = <span class="hljs-keyword">new</span> SimpleLineSymbol({
    <span class="hljs-attr">style</span>: <span class="hljs-string">"dash-dot"</span>,
    <span class="hljs-attr">color</span>: blackColor
  });

  <span class="hljs-keyword">var</span> diamondSymbol = <span class="hljs-keyword">new</span> SimpleMarkerSymbol({
    <span class="hljs-attr">style</span>: <span class="hljs-string">"diamond"</span>,
    <span class="hljs-attr">color</span>: orangeColor,
    <span class="hljs-attr">outline</span>: symbol
  });

  <span class="hljs-keyword">var</span> renderer = <span class="hljs-keyword">new</span> SimpleRenderer({
    <span class="hljs-attr">symbol</span>: diamondSymbol
  });

  <span class="hljs-keyword">var</span> layer = <span class="hljs-keyword">new</span> FeatureLayer({
    <span class="hljs-attr">url</span>: layerURL,
    <span class="hljs-attr">renderer</span>: renderer
  });
});
</code></pre><p>This code can be simplified by only using <code>require()</code> to load the <code>FeatureLayer</code> class and using autocasting to construct new symbol, renderer, and color objects.</p><pre><code class="js"><span class="hljs-built_in">require</span>([ <span class="hljs-string">"esri/layers/FeatureLayer"</span> ], <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">FeatureLayer</span>) </span>{

  <span class="hljs-keyword">var</span> layerURL = <span class="hljs-string">"https://services.arcgis.com/V6ZHFr6zdgNZuVG0/arcgis/rest/services/WorldCities/FeatureServer/0"</span>;

  <span class="hljs-keyword">var</span> layer = <span class="hljs-keyword">new</span> FeatureLayer({
    <span class="hljs-attr">url</span>: layerURL,
    <span class="hljs-attr">renderer</span>: {                        <span class="hljs-comment">// autocasts as new SimpleRenderer()</span>
      <span class="hljs-attr">symbol</span>: {                        <span class="hljs-comment">// autocasts as new SimpleMarkerSymbol()</span>
        <span class="hljs-attr">type</span>: <span class="hljs-string">"simple-marker"</span>,
        <span class="hljs-attr">style</span>: <span class="hljs-string">"diamond"</span>,
        <span class="hljs-attr">color</span>: [ <span class="hljs-number">255</span>, <span class="hljs-number">128</span>, <span class="hljs-number">45</span> ],       <span class="hljs-comment">// autocasts as new Color()</span>
        <span class="hljs-attr">outline</span>: {                     <span class="hljs-comment">// autocasts as new SimpleLineSymbol()</span>
          <span class="hljs-attr">style</span>: <span class="hljs-string">"dash-dot"</span>,
          <span class="hljs-attr">color</span>: [ <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span> ]           <span class="hljs-comment">// autocasts as new Color()</span>
        }
      }
    }
  });
});
</code></pre><p>To know whether a class can be autocasted, look at the <a href="../../../latest/api-reference/index.html">ArcGIS API for JavaScript reference</a> for each class. If a property can be autocasted, the following image will appear:</p><p><img src="../../../assets/img/guide/autocast-label.png" width="76"></p><p>For example, the documentation for the property <a href="../../../latest/api-reference/esri-layers-FeatureLayer.html#renderer"><code>renderer</code></a> of the <code>FeatureLayer</code> class has an <code>autocast</code> tag, which means that this property can be autocasted.</p><p>Notice the code using autocasting is simpler and is functionally identical to the above code snippet where all the modules were <code>required()</code>. The ArcGIS API for JavaScript will take the values passed to the properties in the constructor and instantiate the typed objects internally.</p><p>Keep in mind there is no need to specify the <code>type</code> on properties where the module type is known, or fixed. For example, look at the <code>outline</code> property in the <a href="../../../latest/api-reference/esri-symbols-SimpleMarkerSymbol.html#outline">SimpleMarkerSymbol</a> class from the snippet above. It doesn't have a <code>type</code> property because the only <code>Symbol</code> subclass with an <code>outline</code> property is <code>SimpleLineSymbol</code>.</p><pre><code class="js"><span class="hljs-keyword">var</span> diamondSymbol = {
  <span class="hljs-attr">type</span>: <span class="hljs-string">"simple-marker"</span>,
  <span class="hljs-attr">outline</span>: {
    <span class="hljs-attr">type</span>: <span class="hljs-string">"simple-line"</span>,               <span class="hljs-comment">// Not needed, as type `simple-line` is implied</span>
    <span class="hljs-attr">style</span>: <span class="hljs-string">"dash-dot"</span>,
    <span class="hljs-attr">color</span>: [ <span class="hljs-number">255</span>, <span class="hljs-number">128</span>, <span class="hljs-number">45</span> ]
  }
};
</code></pre><p>In cases where the <code>type</code> is more generic, such as <a href="../../../latest/api-reference/esri-layers-FeatureLayer.html#renderer">FeatureLayer.renderer</a>, then <code>type</code> must always be specified for autocasting to work properly.</p><blockquote><p><a href="../../../latest/sample-code">All code samples</a> document whether a class or property is being autocasted.</p></blockquote><h2 id="async-data">Async Data</h2><p>This section covers JavaScript <a href="#promises">Promises</a> and the <a href="#loading">Loading</a> pattern in the ArcGIS API for JavaScript.</p><h3 id="promises">Promises</h3><p>Promises play an important role in the ArcGIS API for JavaScript. Using promises allows for writing cleaner code when working with asynchronous operations.</p><h4 id="what-is-a-promise%3F">What is a Promise?</h4><p>On the most basic level, a promise is a representation of a future value returned from an asynchronous task. When the task executes, the promise allows other processes to run simultaneously while it waits for a future value to be returned. This is particularly useful when making multiple network requests where timing and download speeds can be unpredictable.</p><p>A promise is always in one of three states:</p><ul><li><em>pending</em></li><li><em>resolved</em></li><li><em>rejected</em></li></ul><p>When a promise resolves, it can resolve to a value or another promise as defined in a <code>callback</code> function. When a promise is rejected, it should be handled in an <code>errCallback</code> function.</p><h4 id="using-promises">Using Promises</h4><p>Promises are commonly used with <code>then()</code>. This is a powerful method that defines the callback function that is called if the promise is resolved, and an error function that is called if the promise is rejected. The first parameter is always the success callback and the second, optional parameter, is the error callback.</p><pre><code class="js">someAsyncFunction().then(callback, errorCallback);
</code></pre><p>The <code>callback</code> is invoked once the promise resolves and the <code>errCallback</code> is called if the promise is rejected.</p><pre><code class="js">someAsyncFunction()
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolveValue</span>) </span>{
    <span class="hljs-built_in">console</span>.log(resolvedValue);
  }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) </span>{
    <span class="hljs-built_in">console</span>.log(error);
  });
</code></pre><p>The <code>catch()</code> method can be used to specify the error callback function for a promise, or a <a href="#chaining-promises">chain of promises</a>.</p><pre><code class="js">someAsyncFunction()
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">resolvedVal</span>) </span>{
    <span class="hljs-built_in">console</span>.log(resolvedVal);
  }).catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) </span>{
    <span class="hljs-built_in">console</span>.error(error);
  });
</code></pre><p>See <a href="../../../latest/api-reference/esri-core-Error.html">Esri Error</a> for more information on error handling.</p><h4 id="example%3A-geometryservice">Example: GeometryService</h4><p>In this example, the <a href="../../../latest/api-reference/esri-tasks-GeometryService.html">GeometryService</a> is used to project several point geometries to a new spatial reference. In the documentation for <a href="../../../latest/api-reference/esri-tasks-GeometryService.html#project"><code>GeometryService.project</code></a>, notice that <code>project()</code> returns a promise that resolves to an array of projected geometries.</p><pre><code class="js"><span class="hljs-built_in">require</span>([
  <span class="hljs-string">"esri/tasks/GeometryService"</span>,
  <span class="hljs-string">"esri/tasks/support/ProjectParameters"</span>,
  ], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">GeometryService, ProjectParameters</span>) </span>{

    <span class="hljs-keyword">var</span> geoService = <span class="hljs-keyword">new</span> GeometryService( <span class="hljs-string">"https://sampleserver6.arcgisonline.com/arcgis/rest/services/Utilities/Geometry/GeometryServer"</span> );

    <span class="hljs-keyword">var</span> projectParams = <span class="hljs-keyword">new</span> ProjectParameters({
      <span class="hljs-attr">geometries</span>: [points],            <span class="hljs-comment">// assuming these are defined elsewhere</span>
      <span class="hljs-attr">outSR</span>: outSR,
      transformation = transformation
    });

    geoService.project(projectParams)
      .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">projectedGeoms</span>)</span>{
       <span class="hljs-built_in">console</span>.log(<span class="hljs-string">"projected points: "</span>, projectedGeoms);
      }, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>)</span>{
        <span class="hljs-built_in">console</span>.error(error);
      });
});
</code></pre><h4 id="chaining-promises">Chaining promises</h4><p>One of the advantages to using promises is leveraging <code>then()</code> to chain multiple promises together.</p><p>This can be useful when layers or graphics have to be created before they can be displayed.</p><p>When more than one promise is chained together, remember that the resolved value of a promise is passed to the next promise. This allows sequences of blocks of code to be executed without having to nest callbacks within each other. It is important to note that callback functions must use the <code>return</code> keyword to return a resolve value to the next promise.</p><p>For an example of chaining promises, see the <a href="../../../latest/sample-code/chaining-promises/index.html">Chaining Promises sample</a>.</p><p>Using the code for <code>geoService</code> and <code>projectParams</code> above, here is an example for chaining promises together:</p><pre><code class="js">  <span class="hljs-keyword">var</span> bufferLayer = <span class="hljs-keyword">new</span> GraphicsLayer();

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">bufferPoints</span>(<span class="hljs-params">points</span>) </span>{
    <span class="hljs-keyword">return</span> geometryEngine.geodesicBuffer(points, <span class="hljs-number">1000</span>, <span class="hljs-string">"feet"</span>);
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addGraphicsToBufferLayer</span>(<span class="hljs-params">buffers</span>) </span>{
    buffers.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">buffer</span>) </span>{
      bufferLayer.add(<span class="hljs-keyword">new</span> Graphic(buffer));
    });
    <span class="hljs-keyword">return</span> buffers;
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculateArea</span>(<span class="hljs-params">buffer</span>) </span>{
    <span class="hljs-keyword">return</span> geometryEngine.geodesicArea(buffer, <span class="hljs-string">"square-feet"</span>);
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">calculateAreas</span>(<span class="hljs-params">buffers</span>) </span>{
    <span class="hljs-keyword">return</span> buffers.map(calculateArea);
  }

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sumArea</span>(<span class="hljs-params">areas</span>) </span>{
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>, total = <span class="hljs-number">0</span>; i &lt; areas.length; i++) {
      total += areas[i];
    }
    <span class="hljs-keyword">return</span> total;
  }

  geoService.project(projectParams)
    .then(bufferPoints)
    .then(addGraphicsToBufferLayer)
    .then(calculateAreas)
    .then(sumArea)
    .catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) </span>{
      <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"One of the promises in the chain was rejected! Message:"</span>, error);
    });
</code></pre><h4 id="additional-resources">Additional resources</h4><p>Read more about promises in the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise">MDN Promise documentation</a> and the <a href="http://dojotoolkit.org/reference-guide/1.10/dojo/promise/Promise.html#dojo-promise-promise">Dojo Promise documentation</a> to get a more in-depth look at their structure and usage.</p><p>The following are additional links to blogs that explain promises with other helpful examples:</p><ul><li><a href="https://www.sitepen.com/blog/2015/06/10/dojo-faq-how-can-i-sequence-asynchronous-operations/">Chaining Promises</a></li><li><a href="https://community.esri.com/people/odoe/blog/2015/06/17/keeping-promises">GeoNet - Keeping Promises</a></li><li><a href="http://www.html5rocks.com/en/tutorials/es6/promises/">JavaScript Promises</a></li></ul><h3 id="loadable">Loadable</h3><p>Resources such as layers, maps, portal items, and tasks frequently rely on remote services or datasets on disk to initialize their state. Accessing such data requires the resources to initialize their state asynchronously. The loadable design pattern unifies this behavior, and resources that adopt this pattern are referred to as &quot;loadable.&quot;</p><p>Loadable resources handle concurrent and repeated requests to allow sharing the same resource instance among various parts of an application. This pattern permits the cancellation of loading a resource for scenarios such as when the service is slow to respond. Finally, loadable resources provide information about their initialization status through explicit states that can be inspected and monitored.</p><h4 id="load-status">Load status</h4><p>The <a href="../../../latest/api-reference/esri-portal-PortalItem.html#loadStatus">loadStatus</a> property on loadable classes returns the state of the loadable resource. Four states are possible.</p><table class="table"><thead><tr><th>State</th><th>Description</th></tr></thead><tbody><tr><td><code>not-loaded</code></td><td>The resource has not been asked to load its metadata and its state isn't properly initialized.</td></tr><tr><td><code>loading</code></td><td>The resource is in the process of loading its metadata asynchronously</td></tr><tr><td><code>failed</code></td><td>The resource failed to load its metadata, and the error encountered is available from the <code>loadError</code> property.</td></tr><tr><td><code>loaded</code></td><td>The resource successfully loaded its metadata and its state is properly initialized.</td></tr></tbody></table><p>The following state transitions represent the stages that a loadable resource goes through.</p><p><img src="../../../assets/img/guide/loadable-pattern.png" alt="loadable-pattern"></p><p>The Loadable interface includes listeners that make it easy to monitor the status of loadable resources, display progress, and take action when the state changes.</p><h4 id="loading">Loading</h4><p>A resource commences loading its metadata asynchronously when <a href="../../../latest/api-reference/esri-portal-PortalItem.html#load"><code>load()</code></a> is invoked.</p><p>At that time, the load status changes from <code>not-loaded</code> to <code>loading</code>. When the asynchronous operation completes, the callback is called. If the operation encounters an error, the error argument in the callback is populated, and <code>loadStatus</code> is set to <code>failed</code>. If the operation completes successfully, the error argument is <code>null</code> and the load status is set to <code>loaded</code>, which means the resource has finished loading its metadata and is now properly initialized.</p><p>Many times, the same resource instance is shared by different parts of the application. For example, a legend component and <a href="../../../latest/api-reference/esri-widgets-LayerList.html"><code>LayerList</code></a> may have access to the same layer, and they both may want to access the layer's properties to populate their UI. Or the same portal instance may be shared across the application to display the user's items and groups in different parts of the application. <code>load()</code> supports multiple &quot;listeners&quot; to simplify this type of application development. It can be called concurrently and repeatedly, but only one attempt is made to load the metadata. If a load operation is already in progress (<code>loading</code> state) when <code>load()</code> is called, it simply piggy-backs on the outstanding operation and the callback is queued to be invoked when that operation completes.</p><p>If the operation has already completed (<code>loaded</code> or <code>failed</code> state) when <code>load()</code> is called, the callback is immediately invoked with the passed result of the operation, be it success or failure, and the state remains unchanged. This makes it safe to liberally call <code>load()</code> on a loadable resource without having to check whether the resource is loaded and without worrying that it will make unnecessary network requests every time.</p><p>If a resource has failed to load, calling <code>load()</code> will not change its state. The callback will be invoked immediately with the past load error.</p><h4 id="cancel-loading">Cancel loading</h4><p>A resource cancels any outstanding asynchronous operation to load its metadata when <a href="../../../latest/api-reference/esri-portal-PortalItem.html#cancelLoad"><code>cancelLoad()</code></a> is invoked. This transitions the state from <code>loading</code> to <code>failed</code>. The <a href="../../../latest/api-reference/esri-portal-PortalItem.html#loadError"><code>loadError</code></a> property will return information that reflects the operation was cancelled.</p><p>This method should be used carefully because all enqueued callbacks for that resource instance will get invoked with an error stating that the operation was cancelled. Thus, one component in the application can cancel the load initiated by other components when sharing the same resource instance.</p><p>The <code>cancelLoad()</code> method does nothing if the resource is not in the <code>loading</code> state.</p><h4 id="cascading-load-dependencies">Cascading load dependencies</h4><p>It is common for a loadable resource to depend on loading other loadable resources to properly initialize its state. For example, a portal item cannot finish loading until its parent portal finishes loading. A feature layer cannot be loaded until its associated feature service is first loaded. This situation is referred to as a load dependency.</p><p>Loadable operations invoked on any resource transparently cascade through its dependency graph. This helps simplify using loadable resources and puts the responsibility on the resource to correctly establish and manage its load dependencies.</p><p>The following code example shows how this cascading behavior leads to concise code. Loading the map causes the portal item to begin loading, which in turn initiates loading its portal. It is unnecessary to load resources explicitly.</p><pre><code class="js"><span class="hljs-keyword">var</span> view = <span class="hljs-keyword">new</span> MapView({
  <span class="hljs-attr">container</span>: <span class="hljs-string">"viewDiv"</span>
});

<span class="hljs-keyword">var</span> portal = <span class="hljs-keyword">new</span> Portal({
  <span class="hljs-attr">url</span>: <span class="hljs-string">"https://myportal/"</span>
});

<span class="hljs-keyword">var</span> webmap = <span class="hljs-keyword">new</span> WebMap({
  <span class="hljs-attr">portalItem</span>: {
    <span class="hljs-attr">portal</span>: portal,
    <span class="hljs-attr">id</span>: <span class="hljs-string">"f2e9b762544945f390ca4ac3671cfa72"</span>
  }
});

webmap.load()
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{ view.map = webmap; })
  .catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">error</span>) </span>{
    <span class="hljs-built_in">console</span>.error(<span class="hljs-string">"The resource failed to load: "</span>, error);
  });
</code></pre><p>It is possible that dependencies may fail to load. Some dependencies might be critical, such as a portal item's dependency on its portal. If a failure is encountered while loading such a dependency, that error would bubble up to the resource that initiated the load cycle, which would also fail to load. Other load dependencies may be incidental, such as a map's dependency on one of its operational layers, and the resource may be able to load successfully even if one of its dependency fails to load.</p><h2 id="using-fromjson">Using fromJSON</h2><p>Many classes, including all <a href="../../../latest/api-reference/esri-layers-Layer.html">layers</a>, <a href="../../../latest/api-reference/esri-symbols-Symbol.html">symbols</a>, <a href="../../../latest/api-reference/esri-geometry-Geometry.html">geometries</a>, <a href="../../../latest/api-reference/esri-Camera.html">Camera</a>, <a href="../../../latest/api-reference/esri-Viewpoint.html">Viewpoint</a>, <a href="../../../latest/api-reference/esri-Color.html">Color</a>, and <a href="../../../latest/api-reference/esri-tasks-support-FeatureSet.html">FeatureSet</a>, contain a method called <code>fromJSON()</code>.</p><p>This function creates an instance of the given class from JSON generated by a product in the ArcGIS platform. JSON in this format is typically created from a <code>toJSON()</code> method or a query via the REST API. See the <a href="https://developers.arcgis.com/documentation/common-data-types/overview-of-common-data-types.htm">ArcGIS REST API documentation</a> for information and examples of how geometries, symbols, webmaps, etc. are queried and represented in JSON.</p><p>The following sample shows how to create a <a href="../../../latest/api-reference/esri-symbols-SimpleMarkerSymbol.html">SimpleMarkerSymbol</a> with JSON that was previously retrieved from a query using the REST API.</p><pre><code class="js"><span class="hljs-built_in">require</span>([<span class="hljs-string">"esri/symbols/SimpleMarkerSymbol"</span>], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">SimpleMarkerSymbol</span>)</span>{
  <span class="hljs-comment">// SimpleMarkerSymbol as a JSON response generated from ArcGIS REST API query</span>
  <span class="hljs-keyword">var</span> smsJson = {
    <span class="hljs-string">"type"</span>: <span class="hljs-string">"esriSMS"</span>,
    <span class="hljs-string">"style"</span>: <span class="hljs-string">"esriSMSSquare"</span>,
    <span class="hljs-string">"color"</span>: [ <span class="hljs-number">76</span>,<span class="hljs-number">115</span>,<span class="hljs-number">0</span>,<span class="hljs-number">255</span> ],
    <span class="hljs-string">"size"</span>: <span class="hljs-number">8</span>,
    <span class="hljs-string">"angle"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"xoffset"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"yoffset"</span>: <span class="hljs-number">0</span>,
    <span class="hljs-string">"outline"</span>:
    {
      <span class="hljs-string">"color"</span>: [ <span class="hljs-number">152</span>,<span class="hljs-number">230</span>,<span class="hljs-number">0</span>,<span class="hljs-number">255</span> ],
      <span class="hljs-string">"width"</span>: <span class="hljs-number">1</span>
    }
  };

  <span class="hljs-comment">// Create a SimpleMarkerSymbol from the JSON representation</span>
  <span class="hljs-keyword">var</span> sms = SimpleMarkerSymbol.fromJSON(smsJson);
});
</code></pre><p>The JSON object passed as the input parameter to <code>fromJSON()</code> may look similar to the object passed as a constructor parameter in the same class. However, these two objects are different in various ways and should not be interchanged. This is because the values and default units of measurement differ between the REST API and the ArcGIS API for JavaScript (e.g. symbol size is measured in points with the REST API whereas the ArcGIS API for JavaScript uses pixels).</p><p>The parameter passed in class constructors is a simple JSON object. This pattern should always be used to create a new instance of a class, unless dealing with JSON previously generated elsewhere from <code>toJSON()</code> or a query to the REST API. Always work with <code>fromJSON()</code>, not the constructor, when creating a class instance from a JSON object in cases where the JSON was previously generated using the REST API or another ArcGIS product (e.g. ArcGIS Server, ArcGIS Online, Portal for ArcGIS, etc.).</p><h3 id="using-jsonutils">Using jsonUtils</h3><p>There are several <code>jsonUtils</code> classes that are provided as convenience classes when using <code>fromJSON()</code> to instantiate an object, but the type of the object is unknown.</p><ul><li><a href="../../../latest/api-reference/esri-geometry-support-jsonUtils.html"><code>esri/geometry/support/jsonUtils</code></a></li><li><a href="../../../latest/api-reference/esri-renderers-support-jsonUtils.html"><code>esri/renderers/support/jsonUtils</code></a></li><li><a href="../../../latest/api-reference/esri-symbols-support-jsonUtils.html"><code>esri/symbols/support/jsonUtils</code></a></li></ul><p>These classes are available for scenarios when a JSON object represents either a geometry, renderer, or symbol from the REST API, but the the object type is unknown. For example, when the renderer of a layer if taken from a REST request and there is uncertainty about whether the renderer is a <a href="../../../latest/api-reference/esri-renderers-UniqueValueRenderer.html">UniqueValueRenderer</a>, <code>require()</code> the <a href="../../../latest/api-reference/esri-renderers-support-jsonUtils.html">esri/renderers/support/jsonUtils</a> class to help determine the type of the renderer.</p><pre><code class="js"><span class="hljs-built_in">require</span>([ <span class="hljs-string">"esri/renderers/support/jsonUtils"</span>,
          <span class="hljs-string">"esri/layers/FeatureLayer"</span>
], <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> rendererJsonUtils, FeatureLayer </span>)</span>{

  <span class="hljs-keyword">var</span> rendererJSON = {               <span class="hljs-comment">// renderer object obtained via REST request</span>
     <span class="hljs-string">"authoringInfo"</span>:<span class="hljs-literal">null</span>,
     <span class="hljs-string">"type"</span>:<span class="hljs-string">"uniqueValue"</span>,
     <span class="hljs-string">"field1"</span>:<span class="hljs-string">"CLASS"</span>,
     <span class="hljs-string">"field2"</span>:<span class="hljs-literal">null</span>,
     <span class="hljs-string">"field3"</span>:<span class="hljs-literal">null</span>,
     <span class="hljs-string">"expression"</span>:<span class="hljs-literal">null</span>,
     <span class="hljs-string">"fieldDelimiter"</span>:<span class="hljs-literal">null</span>,
     <span class="hljs-string">"defaultSymbol"</span>:{
        <span class="hljs-string">"color"</span>:[
           <span class="hljs-number">235</span>,
           <span class="hljs-number">235</span>,
           <span class="hljs-number">235</span>,
           <span class="hljs-number">255</span>
        ],
        <span class="hljs-string">"type"</span>:<span class="hljs-string">"esriSLS"</span>,
        <span class="hljs-string">"width"</span>:<span class="hljs-number">3</span>,
        <span class="hljs-string">"style"</span>:<span class="hljs-string">"esriSLSShortDot"</span>
     },
     <span class="hljs-string">"defaultLabel"</span>:<span class="hljs-string">"Other major roads"</span>,
     <span class="hljs-string">"uniqueValueInfos"</span>:[
        {
           <span class="hljs-string">"value"</span>:<span class="hljs-string">"I"</span>,
           <span class="hljs-string">"symbol"</span>:{
              <span class="hljs-string">"color"</span>:[
                 <span class="hljs-number">255</span>,
                 <span class="hljs-number">170</span>,
                 <span class="hljs-number">0</span>,
                 <span class="hljs-number">255</span>
              ],
              <span class="hljs-string">"type"</span>:<span class="hljs-string">"esriSLS"</span>,
              <span class="hljs-string">"width"</span>:<span class="hljs-number">10</span>,
              <span class="hljs-string">"style"</span>:<span class="hljs-string">"esriSLSSolid"</span>
           },
           <span class="hljs-string">"label"</span>:<span class="hljs-string">"Interstate"</span>
        },
        {
           <span class="hljs-string">"value"</span>:<span class="hljs-string">"U"</span>,
           <span class="hljs-string">"symbol"</span>:{
              <span class="hljs-string">"color"</span>:[
                 <span class="hljs-number">223</span>,
                 <span class="hljs-number">115</span>,
                 <span class="hljs-number">255</span>,
                 <span class="hljs-number">255</span>
              ],
              <span class="hljs-string">"type"</span>:<span class="hljs-string">"esriSLS"</span>,
              <span class="hljs-string">"width"</span>:<span class="hljs-number">7</span>,
              <span class="hljs-string">"style"</span>:<span class="hljs-string">"esriSLSSolid"</span>
           },
           <span class="hljs-string">"label"</span>:<span class="hljs-string">"US Highway"</span>
        }
     ]
  };

  <span class="hljs-comment">// Create a renderer object from its JSON representation</span>
  <span class="hljs-keyword">var</span> flRenderer = rendererJsonUtils.fromJSON(rendererJSON);

  <span class="hljs-comment">// Set the renderer on a layer</span>
  <span class="hljs-keyword">var</span> layer = <span class="hljs-keyword">new</span> FeatureLayer({
    <span class="hljs-attr">renderer</span>: flRenderer
  });
});
</code></pre></div><nav class="guide-pagination-links trailer-1"><a href="../../../latest/guide/layers-and-data/" class="guide-pagination-link guide-pagination-link-previous"><small class="guide-pagination-label">Previous</small> <span class="guide-pagination-title">Layers and data</span> <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.2 32.2"><path data-name="Path 328" d="M16.1.5a15.6 15.6 0 1 0 15.6 15.6A15.62 15.62 0 0 0 16.1.5zm0 28.8a13.2 13.2 0 1 1 13.2-13.2 13.187 13.187 0 0 1-13.2 13.2zm5-5.2l-8-8 8-8h-5l-8 8 8 8z"/></svg> </a><a href="../../../latest/guide/visualization-overview/" class="guide-pagination-link guide-pagination-link-next"><small class="guide-pagination-label">Next</small> <span class="guide-pagination-title">Visualization Overview</span> <svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32.2 32.2"><path d="M16.1 31.7A15.6 15.6 0 1 0 .5 16.1a15.62 15.62 0 0 0 15.6 15.6zm0-28.8A13.2 13.2 0 1 1 2.9 16.1 13.187 13.187 0 0 1 16.1 2.9zm-5 5.2l8 8-8 8h5l8-8-8-8z"/></svg></a></nav></main><div class="column-4"><section id="main-toc-large" class="panel tablet-hide trailer-1"><h5 class="avenir-regular text-dark-gray font-size--3">Content</h5><developers-toc content=".js-container-guide" container="main-toc-large" include="h2,h3,h4,h5,h6"></developers-toc></section></div></div><div class="footnote feedback right trailer-1"><a class="icon-ui-contact hide js-feedback" href="mailto:js_feedback@esri.com?subject=Feedback%20on%204.14%20-%20guide:%20Programming%20patterns&body=Hello,%0A%0AI%20was%20reading%20the%20ArcGIS%20API%20for%20JavaScript%20version%204.14%20documentation%20and%20have%20some%20feedback.%0A%0ADocumentation%20details:%0APage%20title:%20%7BREPLACE_TITLE%7D%0APage%20URL:%20%7BREPLACE_URL%7D%0AUser-Agent:%20%7BREPLACE_UA%7D%0A%0A">Feedback on this topic?</a></div></div></div><footer class="footer leader- link-dark-gray" role="contentinfo"><div class="grid-container"><nav class="column-6"><h6>ArcGIS for Developers</h6><ul class="list-plain"><li><a href="/">Home</a></li><li><a href="/features/">Features</a></li><li><a href="/documentation/">Documentation</a></li><li><a href="/support/">Support</a></li><li><a href="/pricing/">Pricing</a></li><li><a href="/startups/">Startups</a></li><li><a href="https://blogs.esri.com/esri/arcgis/category/developer/">Blog</a></li></ul></nav><nav class="column-6"><h6>ArcGIS Platform</h6><ul class="list-plain"><li><a href="http://arcgis.com">ArcGIS Online</a></li><li><a href="http://desktop.arcgis.com">ArcGIS Desktop</a></li><li><a href="http://server.arcgis.com">ArcGIS Enterprise</a></li><li><a href="http://developers.arcgis.com">ArcGIS for Developers</a></li><li><a href="http://solutions.arcgis.com">ArcGIS Solutions</a></li><li><a href="http://marketplace.arcgis.com">ArcGIS Marketplace</a></li></ul></nav><nav class="column-6"><h6>About Esri</h6><ul class="list-plain"><li><a href="http://www.esri.com/about-esri/">About Us</a></li><li><a href="http://www.esri.com/careers/">Careers</a></li><li><a href="https://blogs.esri.com/esri/esri-insider/">Insiders Blog</a></li><li><a href="http://www.esri.com/events/user-conference/index.html">User Conference</a></li><li><a href="http://www.esri.com/events/devsummit/index.html">Developer Summit</a></li></ul></nav><nav class="column-6"><a class="esri-logo" href="http://esri.com" aria-label="Esri Home"></a><div class="footer-social-nav leader-1"><a class="icon-social-twitter" aria-label="Esri on Twitter" href="https://twitter.com/Esri/"></a> <a class="icon-social-facebook" aria-label="Esri on Facebook" href="https://www.facebook.com/esrigis/"></a> <a class="icon-social-github" aria-label="Esri on GitHub" href="http://esri.github.com/"></a> <a class="icon-social-contact" aria-label="Contact Esri" href="http://www.esri.com/about-esri/contact/"></a></div></nav><div class="column-24 leader-1"><p><small><a href="http://www.esri.com/legal/copyright-trademarks">Copyright © 2020 Esri</a>. All rights reserved. | <a href="http://www.esri.com/legal/privacy">Privacy</a> | <a href="http://www.esri.com/legal/software-license">Terms of use</a> | <a href="/terms/faq/">FAQ</a></small></p></div></div></footer><script></script><script>var relativePath=document.URL.replace(/[-\w\d]*\.(html|css|js).*/,"../../..")</script><script src="../../../assets/js/config.js"></script><script src="../../../assets/js/preparse.js"></script><script src="../../../assets/js/developers-components/sharedComponents.js"></script><div class="js-modal modal-overlay modifier-class" data-modal="modal-keyboard-shortcuts"><div class="modal-content column-8" aria-label="modal" role="dialog"><a class="js-modal-toggle right" href="#" aria-label="close-modal"><svg xmlns="http://www.w3.org/2000/svg" width="21" height="21" viewBox="0 0 32 32" class="svg-icon"><path d="M18.404 16l9.9 9.9-2.404 2.404-9.9-9.9-9.9 9.9L3.696 25.9l9.9-9.9-9.9-9.898L6.1 3.698l9.9 9.899 9.9-9.9 2.404 2.406-9.9 9.898z"/></svg></a><h4>Keyboard shortcuts</h4><hr class="leader-0 trailer-half"><div><table class="table-plain keyboard-mappings"><thead><tr><th></th><th>Site wide shortcuts</th></tr></thead><tbody><tr><td><kbd>?</kbd></td><td>Bring up this help dialog</td></tr><tr><td><kbd>esc</kbd></td><td>Dismiss this help dialog</td></tr><tr><td><kbd>g</kbd><kbd>h</kbd></td><td>Go to Home</td></tr><tr><td><kbd>g</kbd><kbd>g</kbd></td><td>Go to Guide</td></tr><tr><td><kbd>g</kbd><kbd>a</kbd></td><td>Go to API Reference</td></tr><tr><td><kbd>g</kbd><kbd>s</kbd></td><td>Go to Sample Code</td></tr><tr><td><kbd>g</kbd><kbd>t</kbd></td><td>Scroll to top of page</td></tr><tr><td><kbd>spacebar</kbd></td><td>Scroll page down</td></tr><tr><td><kbd>shift spacebar</kbd></td><td>Scroll page up</td></tr><tr><td><kbd>g</kbd><kbd>b</kbd></td><td>Scroll to bottom of page</td></tr></tbody></table></div></div></div><script src="../../../assets/js/libs/url-search-params.js"></script><script src="../../../assets/js/calcite-web.js"></script><script src="../../../assets/js/calcite-web-extend.js"></script><script src="../../../assets/js/libs/mousetrap.js"></script><script>"function"==typeof Mousetrap&&"object"==typeof calcite&&"function"==typeof Mousetrap&&"object"==typeof calcite&&Mousetrap.bind(["g h","g g","g a","g s","?","g t","g b"],function(e,t){calcite.bus.emit("keyboard:mousetrap",{event:e,combination:t,navigation:{h:"../../../index.html",g:"../../../latest/guide/index.html",a:"../../../latest/api-reference/index.html",s:"../../../latest/sample-code/index.html"}})})</script></body></html>